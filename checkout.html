<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout | Northwall Compliance</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { onyx: '#050505', royal: '#0A1F2E' },
          fontFamily: { sans: ['Inter', 'sans-serif'], glam: ['Playfair Display', 'serif'] }
        }
      }
    }
  </script>
  <style>
    .dark-box {
      background: #050505;
      backdrop-filter: blur(50px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 40px 100px rgba(0,0,0,0.3);
    }
    .input-field {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      transition: all 0.3s ease;
    }
    .input-field:focus {
      border-color: #3b82f6;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
    }
    .data-label { font-size: 9px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.3em; color: rgba(255,255,255,0.3); }
    .data-value { font-size: 16px; color: white; margin-top: 4px; }
  </style>
</head>

<body class="bg-[#F8F9FA] text-onyx font-sans min-h-screen">

  <header class="fixed top-0 w-full z-[100] bg-white border-b border-gray-100">
    <div class="max-w-[1400px] mx-auto px-6 py-6 flex justify-between items-center">
      <a href="binders.html" class="text-[10px] font-bold uppercase tracking-widest text-gray-400 hover:text-onyx">‚Üê Back to Shop</a>
      <div class="text-[10px] font-bold text-gray-400">SSL SECURE</div>
    </div>
  </header>

  <main class="pt-32 pb-32 px-6 max-w-4xl mx-auto">
    
    <div id="successPanel" class="hidden animate-in fade-in zoom-in duration-500">
      <div class="dark-box rounded-[3rem] p-12 md:p-20 text-center text-white">
        <div class="h-20 w-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-8 shadow-[0_0_40px_rgba(37,99,235,0.5)]">
            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
        </div>
        <h1 class="text-4xl md:text-6xl font-glam mb-4">Thank You.</h1>
        <p class="text-gray-400 text-lg mb-10">Your purchase is complete. Check your email for access instructions.</p>
        <div class="bg-white/5 border border-white/10 rounded-2xl p-6 inline-block mb-10">
            <span class="text-xs text-gray-500 uppercase tracking-widest block mb-2">Order Number</span>
            <span id="orderNumDisplay" class="text-2xl font-mono text-blue-400 tracking-tighter"></span>
        </div>
        <div><a href="index.html" class="inline-block px-10 py-5 bg-white text-onyx rounded-xl font-bold text-xs uppercase tracking-widest">Return Home</a></div>
      </div>
    </div>

    <div id="reviewPanel" class="hidden space-y-10">
      <div class="text-center mb-10">
        <h2 class="text-[10px] font-black uppercase tracking-[0.8em] text-blue-600 mb-2">Verification </h2>
        <h1 class="text-3xl font-glam italic">Review Your Purchase</h1>
      </div>
      <div class="dark-box rounded-[3rem] p-10 md:p-16 space-y-12">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
          <div><div class="data-label">Company</div><div id="rev_company" class="data-value"></div></div>
          <div><div class="data-label">Name</div><div id="rev_name" class="data-value"></div></div>
          <div class="md:col-span-2"><div class="data-label">Address</div><div id="rev_address" class="data-value"></div></div>
        </div>
        <div class="h-[1px] bg-white/10"></div>
        <div id="rev_items" class="space-y-4"></div>
        <div class="h-[1px] bg-white/10"></div>
        <div class="flex justify-between items-center">
          <div><div class="data-label">Total</div><div id="rev_total" class="text-4xl font-glam text-white mt-1"></div></div>
          <div class="text-right"><div class="data-label">Payment Type</div><div class="text-white/60 text-xs">Secure Authorization Verified</div></div>
        </div>
        <div class="flex flex-col md:flex-row gap-4 pt-6">
          <button onclick="editDetails()" class="flex-1 py-5 border border-white/20 text-white/40 text-[10px] font-black uppercase tracking-widest rounded-xl hover:text-white transition-all">Edit Details</button>
          <button onclick="finalPurchase()" class="flex-[2] py-5 bg-blue-600 text-white text-[10px] font-black uppercase tracking-[0.5em] rounded-xl shadow-2xl hover:bg-blue-500 transition-all">Complete Purchase</button>
        </div>
      </div>
    </div>

    <div id="checkoutPanel" class="space-y-10">
      <div class="dark-box rounded-[3rem] p-8 md:p-12 text-white">
        <div id="itemList" class="space-y-6 mb-10"></div>
        <div class="border-t border-white/10 pt-8 flex justify-between items-end">
          <div>
            <span class="text-[10px] text-gray-500 uppercase tracking-widest">Total Price</span>
            <div id="totalPrice" class="text-5xl font-glam">$0.00</div>
          </div>
          <span class="text-[10px] text-green-500 uppercase font-bold">Secure Shipping Included</span>
        </div>
      </div>

      <div class="dark-box rounded-[3rem] p-10 md:p-16 text-white">
        <form id="payForm" class="space-y-12">
          <div class="space-y-8">
            <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500">Contact & Shipping</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div class="space-y-2">
                <label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Full Name</label>
                <input id="form_name" type="text" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="John Doe">
              </div>
              <div class="space-y-2">
                <label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Company Name</label>
                <input id="form_company" type="text" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="Facility Name">
              </div>
              <div class="md:col-span-2 space-y-2">
                <label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Address</label>
                <input id="form_address" type="text" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="Street, City, State, Zip">
              </div>
            </div>
          </div>

          <div class="space-y-8">
            <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500">Card Payment</h3>
            <div class="space-y-6">
              <div class="space-y-2"><label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Card Number</label><input type="text" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="0000 0000 0000 0000"></div>
              <div class="grid grid-cols-2 gap-8">
                <div class="space-y-2"><label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Expiration</label><input type="text" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="MM / YY"></div>
                <div class="space-y-2"><label class="text-[10px] uppercase font-bold text-gray-400 ml-2">Security Code</label><input type="password" required class="input-field w-full rounded-2xl px-6 py-5 text-sm" placeholder="CVV"></div>
              </div>
            </div>
          </div>

          <button type="submit" class="w-full py-8 bg-blue-600 hover:bg-blue-500 text-white rounded-3xl font-bold uppercase tracking-[0.4em] text-[11px] shadow-2xl transition-all active:scale-95">
            Review Purchase
          </button>
        </form>
      </div>
    </div>
  </main>

  <footer class="bg-white py-12 border-t border-gray-100">
    </footer>

  <script>
    let globalTotal = 0;

    function generateOrderNumber() {
        return 'NW-' + Math.floor(100000 + Math.random() * 900000);
    }

    function loadItems() {
      const cart = JSON.parse(localStorage.getItem('northwall_cart')) || [];
      const list = document.getElementById('itemList');
      const totalDisplay = document.getElementById('totalPrice');
      globalTotal = 0;

      if (cart.length === 0) {
        list.innerHTML = `<p class="text-gray-500 text-center italic">No items found.</p>`;
        return;
      }

      list.innerHTML = cart.map(item => {
        globalTotal += (item.price * item.qty);
        return `
          <div class="flex items-center gap-6">
            <div class="h-16 w-16 bg-white/10 rounded-xl flex items-center justify-center p-2"><img src="${item.img}" class="h-full w-auto"></div>
            <div class="flex-1">
              <h4 class="font-glam text-lg text-white">${item.name}</h4>
              <p class="text-[10px] text-gray-500 uppercase tracking-widest">Qty: ${item.qty}</p>
            </div>
            <div class="text-xl font-glam text-white">$${(item.price * item.qty).toFixed(2)}</div>
          </div>`;
      }).join('');

      totalDisplay.innerText = `$${globalTotal.toFixed(2)}`;
    }

    // TRANSITION TO REVIEW (Step 1 -> 2)
    document.getElementById('payForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Inject data into Review Screen
      document.getElementById('rev_name').innerText = document.getElementById('form_name').value;
      document.getElementById('rev_company').innerText = document.getElementById('form_company').value;
      document.getElementById('rev_address').innerText = document.getElementById('form_address').value;
      document.getElementById('rev_total').innerText = `$${globalTotal.toFixed(2)}`;
      
      const cart = JSON.parse(localStorage.getItem('northwall_cart')) || [];
      document.getElementById('rev_items').innerHTML = cart.map(i => `
        <div class="flex justify-between text-white/50 text-[10px] uppercase tracking-widest font-black">
          <span>${i.name} (x${i.qty})</span>
          <span>$${(i.price * i.qty).toFixed(2)}</span>
        </div>`).join('');

      document.getElementById('checkoutPanel').classList.add('hidden');
      document.getElementById('reviewPanel').classList.remove('hidden');
      window.scrollTo({top: 0, behavior: 'smooth'});
    });

    // GO BACK TO EDIT
    function editDetails() {
      document.getElementById('reviewPanel').classList.add('hidden');
      document.getElementById('checkoutPanel').classList.remove('hidden');
    }

    // FINAL PURCHASE (Step 2 -> 3)
    function finalPurchase() {
      const orderID = generateOrderNumber();
      const orderLog = JSON.parse(localStorage.getItem('northwall_orders')) || [];
      
      orderLog.push({
          orderID: orderID,
          name: document.getElementById('form_name').value,
          company: document.getElementById('form_company').value,
          items: JSON.parse(localStorage.getItem('northwall_cart')),
          date: new Date().toLocaleString()
      });
      localStorage.setItem('northwall_orders', JSON.stringify(orderLog));

      document.getElementById('reviewPanel').classList.add('hidden');
      document.getElementById('successPanel').classList.remove('hidden');
      document.getElementById('orderNumDisplay').innerText = orderID;

      localStorage.removeItem('northwall_cart');
      window.scrollTo({top: 0, behavior: 'smooth'});
    }

    window.onload = loadItems;
  </script>

</body>
</html>
